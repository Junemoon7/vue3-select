import{_ as k}from"./_plugin-vue_export-helper-fd160f06.js";import{a as z}from"./axios-b467143c.js";import{d as B,r as u,z as h,w as S,o as T,c as A,a as c,e as o,f as r,g as p,u as H,A as U,B as L,E as q,i as j,j as G,q as J,C as M}from"./index-10fd0a3a.js";const O={class:"contain"},Y={action:"#",class:"log"},$={class:"demo-date-picker"},K={class:"block"},Q={class:"mb-2 flex items-center text-sm sexselect"},W={class:"sumbitbox"},X=B({__name:"webHome",setup(Z){const f=u(),w=(t,e,s)=>{if(!e)return s(new Error("Please input the age"));setTimeout(()=>{Number.isInteger(e)?e<18?s(new Error("Age must be greater than 18")):s():s(new Error("Please input digits"))},1e3)},b=(t,e,s)=>{e===""&&s(new Error("请输入学号！")),setTimeout(()=>{e.toString().length<8?s(new Error("请输入正确的学号！")):s()},1e3)},E=(t,e,s)=>{e===""?s(new Error("Please input the password again")):e!==a.pass?s(new Error("Two inputs don't match!")):s()},a=h({pass:"",checkPass:"",age:""}),x=h({pass:[{validator:b,trigger:"blur"}],checkPass:[{validator:E,trigger:"blur"}],age:[{validator:w,trigger:"blur"}]}),V=t=>{t&&t.resetFields()},F=H();u("");const y=z.create({baseURL:"http://localhost:8080"}),D=()=>y.get("/students",{params:{studentNum:a.pass,sex:d.value,stuDate:m.value}}).then(t=>t.data);u("default");const d=u("男"),P=t=>{let e=new Date(t),s=e.getFullYear(),l=e.getMonth()+1,n=e.getDate();return l=l>10?l:"0"+l,n=n>10?n:"0"+n,s+"-"+l+"-"+n},_=u(""),m=u(""),N=async()=>{if(!a.pass||!d.value||!m.value)return alert("请填写信息");if(String(a.pass).length<8)return alert("请填写完整学号");const t=await D().catch(e=>{alert("请求失败")});localStorage.setItem("List",JSON.stringify(t)),t.code==1?(F.push({name:"webResult",query:{studentNum:a.pass,sex:d.value,stuDate:m.value}}),console.log(t.code)):(alert("请求失败"),console.log(t.code))};S(_,(t,e)=>{m.value=P(t)});const R=t=>t.getTime()>Date.now();return(t,e)=>{const s=U,l=L,n=q,g=j,C=G,v=J,I=M;return T(),A("div",O,[c("form",Y,[o(I,{ref_key:"ruleFormRef",ref:f,model:a,"status-icon":"",rules:x,"label-width":"50px",class:"demo-ruleForm"},{default:r(()=>[o(l,{label:"学号",prop:"pass"},{default:r(()=>[o(s,{modelValue:a.pass,"onUpdate:modelValue":e[0]||(e[0]=i=>a.pass=i),placeholder:"请输入8位学号",utocomplete:"off",oninput:"this.value=this.value.replace(/\\D/g);if(this.value.length>8)this.value=this.value.slice(0,8)",min:"1"},null,8,["modelValue"])]),_:1}),c("div",$,[c("div",K,[o(n,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=i=>_.value=i),type:"date",placeholder:"请选择日期","disabled-date":R,size:t.large},null,8,["modelValue","size"]),c("div",Q,[o(C,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=i=>d.value=i),class:"ml-4"},{default:r(()=>[o(g,{label:"男",size:"large"},{default:r(()=>[p("男 🚹")]),_:1}),o(g,{label:"女",size:"large"},{default:r(()=>[p("女 🚺")]),_:1})]),_:1},8,["modelValue"])])])]),o(l,null,{default:r(()=>[c("div",W,[o(v,{type:"primary",onClick:N},{default:r(()=>[p("查询")]),_:1}),o(v,{onClick:e[3]||(e[3]=i=>V(f.value))},{default:r(()=>[p("重置")]),_:1})])]),_:1})]),_:1},8,["model","rules"])])])}}});const oe=k(X,[["__scopeId","data-v-b44f1dac"]]);export{oe as default};
