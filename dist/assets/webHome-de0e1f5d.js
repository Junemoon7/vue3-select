import{a as z,_ as B}from"./_plugin-vue_export-helper-040bed70.js";/* empty css                  */import{d as C,r as u,l as h,w as S,o as T,c as A,a as m,e as a,f as r,g as p,u as H,z as U,A as L,E as q,i as j,j as G,q as J,B as M}from"./index-6d29af27.js";const O={class:"contain"},Y={action:"#",class:"log"},$={class:"demo-date-picker"},K={class:"block"},Q={class:"mb-2 flex items-center text-sm sexselect"},W={class:"sumbitbox"},X=C({__name:"webHome",setup(Z){const f=u(),w=(t,e,s)=>{if(!e)return s(new Error("Please input the age"));setTimeout(()=>{Number.isInteger(e)?e<18?s(new Error("Age must be greater than 18")):s():s(new Error("Please input digits"))},1e3)},b=(t,e,s)=>{e===""&&s(new Error("请输入学号！")),setTimeout(()=>{e.toString().length<8?s(new Error("请输入正确的学号！")):s()},1e3)},E=(t,e,s)=>{e===""?s(new Error("Please input the password again")):e!==o.pass?s(new Error("Two inputs don't match!")):s()},o=h({pass:"",checkPass:"",age:""}),x=h({pass:[{validator:b,trigger:"blur"}],checkPass:[{validator:E,trigger:"blur"}],age:[{validator:w,trigger:"blur"}]}),V=t=>{t&&t.resetFields()},F=H();u("");const y=z.create({baseURL:"http://222.195.120.156/"}),D=()=>y.get("/result",{params:{studentNum:o.pass,sex:d.value,stuDate:c.value}}).then(t=>t.data);u("default");const d=u("男"),P=t=>{let e=new Date(t),s=e.getFullYear(),l=e.getMonth()+1,n=e.getDate();return l=l>=10?l:"0"+l,n=n>=10?n:"0"+n,s+"-"+l+"-"+n},_=u(""),c=u(""),N=async()=>{if(!o.pass||!d.value||!c.value)return alert("请填写信息");if(String(o.pass).length<8)return alert("请填写完整学号");const t=await D().catch(e=>{alert("请求失败")});localStorage.setItem("List",JSON.stringify(t)),t.code==1?F.push({name:"webResult",query:{studentNum:o.pass,sex:d.value,stuDate:c.value}}):alert(t.msg)};S(_,(t,e)=>{c.value=P(t)});const R=t=>t.getTime()>Date.now();return(t,e)=>{const s=U,l=L,n=q,g=j,I=G,v=J,k=M;return T(),A("div",O,[m("form",Y,[a(k,{ref_key:"ruleFormRef",ref:f,model:o,"status-icon":"",rules:x,"label-width":"50px",class:"demo-ruleForm"},{default:r(()=>[a(l,{label:"学号",prop:"pass"},{default:r(()=>[a(s,{modelValue:o.pass,"onUpdate:modelValue":e[0]||(e[0]=i=>o.pass=i),placeholder:"请输入8位学号",utocomplete:"off",oninput:"this.value=this.value.replace(/\\D/g);if(this.value.length>8)this.value=this.value.slice(0,8)",min:"1"},null,8,["modelValue"])]),_:1}),m("div",$,[m("div",K,[a(n,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=i=>_.value=i),type:"date",placeholder:"请选择日期","disabled-date":R,size:t.large},null,8,["modelValue","size"]),m("div",Q,[a(I,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=i=>d.value=i),class:"ml-4"},{default:r(()=>[a(g,{label:"男",size:"large"},{default:r(()=>[p("男 🚹")]),_:1}),a(g,{label:"女",size:"large"},{default:r(()=>[p("女 🚺")]),_:1})]),_:1},8,["modelValue"])])])]),a(l,null,{default:r(()=>[m("div",W,[a(v,{type:"primary",onClick:N},{default:r(()=>[p("查询")]),_:1}),a(v,{onClick:e[3]||(e[3]=i=>V(f.value))},{default:r(()=>[p("重置")]),_:1})])]),_:1})]),_:1},8,["model","rules"])])])}}});const ae=B(X,[["__scopeId","data-v-a3147e7d"]]);export{ae as default};
